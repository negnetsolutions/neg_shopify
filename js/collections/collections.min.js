var Collections=function(t,e){var s=this;this.autopager=!1,this.el=t,this.fetchOptions={perpage:t.dataset.perpage,id:t.dataset.id,type:t.dataset.type,sort:t.dataset.sort},this.opts=void 0!==e?e:{},this.url=t.dataset.endpoint,this.itemsEl=t.querySelector(".items"),this.firstPage=0<s.itemsEl.children.length?1:0,this.sortEl=t.querySelector("#sort_order"),null!==this.sortEl&&this.sortEl.addEventListener("change",function(t){t=t.target.options[t.target.selectedIndex].value;s.fetchOptions.sort=t,s.fetch()}),this.fetch=function(){!1!==s.autopager&&(s.autopager.unsetObserver(),s.firstPage=0),s.autopager=new autoPager(s.getUrl,s.itemsEl,s.el.dataset.perpage,s.firstPage)},this.getUrl=function(){var t="";for(e in s.fetchOptions)t+="&",t+=e+"="+encodeURIComponent(s.fetchOptions[e]);if(void 0!==s.opts.fetchOptionsCallback){var e,o=s.opts.fetchOptionsCallback.call(s.opts.fetchOptionsCallbackContext);for(e in o)t+="&",t+=e+"="+encodeURIComponent(o[e])}return s.url+"?"+t.substring(1)},s.fetch()},collections=document.querySelectorAll(".shopify_collection.autopager");Array.prototype.forEach.call(collections,function(t){new Collections(t)});
